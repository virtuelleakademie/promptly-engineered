<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exploring OpenAI Models ‚Äì Promptly Engineered</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../notebooks/structured-output.html" rel="next">
<link href="../workshop/openai/index.html" rel="prev">
<link href="..//assets/robot.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-b5f3c2d33471fce22443e900396c3f30.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/quarto-timer-1.0.0/timer.js"></script>
<link href="../site_libs/quarto-contrib/quarto-timer-1.0.0/timer.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<style>
div.callout-screens-down.callout {
  border-left-color: orange;
}
div.callout-screens-down.callout-style-default > .callout-header {
  background-color: rgb(from orange r g b / 13%);
}
div.callout-screens-down .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-screens-down.callout-style-default .callout-icon::before, div.callout-screens-down.callout-titled .callout-icon::before {
  content: 'üîΩ';
  background-image: none;
}
div.callout-export.callout {
  border-left-color: brown;
}
div.callout-export.callout-style-default > .callout-header {
  background-color: rgb(from brown r g b / 13%);
}
div.callout-export .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-export.callout-style-default .callout-icon::before, div.callout-export.callout-titled .callout-icon::before {
  content: 'üì§';
  background-image: none;
}
div.callout-checkpoint.callout {
  border-left-color: purple;
}
div.callout-checkpoint.callout-style-default > .callout-header {
  background-color: rgb(from purple r g b / 13%);
}
div.callout-checkpoint .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-checkpoint.callout-style-default .callout-icon::before, div.callout-checkpoint.callout-titled .callout-icon::before {
  content: 'üéØ';
  background-image: none;
}
div.callout-caution.callout {
  border-left-color: orange;
}
div.callout-caution.callout-style-default > .callout-header {
  background-color: rgb(from orange r g b / 13%);
}
div.callout-caution .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-caution.callout-style-default .callout-icon::before, div.callout-caution.callout-titled .callout-icon::before {
  content: '‚ö†Ô∏è';
  background-image: none;
}
div.callout-reflect.callout {
  border-left-color: purple;
}
div.callout-reflect.callout-style-default > .callout-header {
  background-color: rgb(from purple r g b / 13%);
}
div.callout-reflect .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-reflect.callout-style-default .callout-icon::before, div.callout-reflect.callout-titled .callout-icon::before {
  content: 'üí≠';
  background-image: none;
}
div.callout-break.callout {
  border-left-color: brown;
}
div.callout-break.callout-style-default > .callout-header {
  background-color: rgb(from brown r g b / 13%);
}
div.callout-break .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-break.callout-style-default .callout-icon::before, div.callout-break.callout-titled .callout-icon::before {
  content: '‚òï';
  background-image: none;
}
div.callout-tip.callout {
  border-left-color: gold;
}
div.callout-tip.callout-style-default > .callout-header {
  background-color: rgb(from gold r g b / 13%);
}
div.callout-tip .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-tip.callout-style-default .callout-icon::before, div.callout-tip.callout-titled .callout-icon::before {
  content: 'üí°';
  background-image: none;
}
div.callout-testing.callout {
  border-left-color: green;
}
div.callout-testing.callout-style-default > .callout-header {
  background-color: rgb(from green r g b / 13%);
}
div.callout-testing .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-testing.callout-style-default .callout-icon::before, div.callout-testing.callout-titled .callout-icon::before {
  content: 'üß™';
  background-image: none;
}
div.callout-prompt-example.callout {
  border-left-color: darkblue;
}
div.callout-prompt-example.callout-style-default > .callout-header {
  background-color: rgb(from darkblue r g b / 13%);
}
div.callout-prompt-example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-prompt-example.callout-style-default .callout-icon::before, div.callout-prompt-example.callout-titled .callout-icon::before {
  content: 'üë©üèº‚Äçüîß';
  background-image: none;
}
div.callout-output-example.callout {
  border-left-color: darkgreen;
}
div.callout-output-example.callout-style-default > .callout-header {
  background-color: rgb(from darkgreen r g b / 13%);
}
div.callout-output-example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-output-example.callout-style-default .callout-icon::before, div.callout-output-example.callout-titled .callout-icon::before {
  content: 'üìÑ';
  background-image: none;
}
div.callout-pair.callout {
  border-left-color: forestgreen;
}
div.callout-pair.callout-style-default > .callout-header {
  background-color: rgb(from forestgreen r g b / 13%);
}
div.callout-pair .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-pair.callout-style-default .callout-icon::before, div.callout-pair.callout-titled .callout-icon::before {
  content: 'üë•';
  background-image: none;
}
div.callout-prompt-template.callout {
  border-left-color: indigo;
}
div.callout-prompt-template.callout-style-default > .callout-header {
  background-color: rgb(from indigo r g b / 13%);
}
div.callout-prompt-template .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-prompt-template.callout-style-default .callout-icon::before, div.callout-prompt-template.callout-titled .callout-icon::before {
  content: 'üìã';
  background-image: none;
}
div.callout-group.callout {
  border-left-color: purple;
}
div.callout-group.callout-style-default > .callout-header {
  background-color: rgb(from purple r g b / 13%);
}
div.callout-group .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-group.callout-style-default .callout-icon::before, div.callout-group.callout-titled .callout-icon::before {
  content: 'üë•';
  background-image: none;
}
div.callout-timing.callout {
  border-left-color: red;
}
div.callout-timing.callout-style-default > .callout-header {
  background-color: rgb(from red r g b / 13%);
}
div.callout-timing .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-timing.callout-style-default .callout-icon::before, div.callout-timing.callout-titled .callout-icon::before {
  content: '‚è±Ô∏è';
  background-image: none;
}
div.callout-individual.callout {
  border-left-color: steelblue;
}
div.callout-individual.callout-style-default > .callout-header {
  background-color: rgb(from steelblue r g b / 13%);
}
div.callout-individual .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-individual.callout-style-default .callout-icon::before, div.callout-individual.callout-titled .callout-icon::before {
  content: 'üíª';
  background-image: none;
}
div.callout-setup.callout {
  border-left-color: gray;
}
div.callout-setup.callout-style-default > .callout-header {
  background-color: rgb(from gray r g b / 13%);
}
div.callout-setup .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-setup.callout-style-default .callout-icon::before, div.callout-setup.callout-titled .callout-icon::before {
  content: '‚öôÔ∏è';
  background-image: none;
}
div.callout-feedback.callout {
  border-left-color: teal;
}
div.callout-feedback.callout-style-default > .callout-header {
  background-color: rgb(from teal r g b / 13%);
}
div.callout-feedback .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-feedback.callout-style-default .callout-icon::before, div.callout-feedback.callout-titled .callout-icon::before {
  content: 'üìù';
  background-image: none;
}
div.callout-try.callout {
  border-left-color: blue;
}
div.callout-try.callout-style-default > .callout-header {
  background-color: rgb(from blue r g b / 13%);
}
div.callout-try .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-try.callout-style-default .callout-icon::before, div.callout-try.callout-titled .callout-icon::before {
  content: 'üîÑ';
  background-image: none;
}
div.callout-screens-up.callout {
  border-left-color: green;
}
div.callout-screens-up.callout-style-default > .callout-header {
  background-color: rgb(from green r g b / 13%);
}
div.callout-screens-up .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-screens-up.callout-style-default .callout-icon::before, div.callout-screens-up.callout-titled .callout-icon::before {
  content: 'üîº';
  background-image: none;
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="Exploring OpenAI Models ‚Äì Promptly Engineered">
<meta property="og:description" content="">
<meta property="og:site_name" content="Promptly Engineered">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Promptly Engineered</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../workshop/index.html" aria-current="page"> <i class="bi bi-card-list" role="img">
</i> 
<span class="menu-text">Workshop</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../projects/anki/index.html"> <i class="bi bi-code-square" role="img">
</i> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-slides" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-file-slides" role="img">
</i> 
 <span class="menu-text">Slides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-slides">    
        <li>
    <a class="dropdown-item" href="../slides/openai-platform/index.html">
 <span class="dropdown-text">OpenAI Platform</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../slides/understanding-llms/index.html">
 <span class="dropdown-text">Understanding LLMs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../slides/prompt-engineering-basics/index.html">
 <span class="dropdown-text">Basic prompt engineering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../slides/prompt-engineering-intermediate/index.html">
 <span class="dropdown-text">Intermediate prompt engineering</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://virtuelleakademie.ch/knowledge-base/" title="Knowledge Base" class="quarto-navigation-tool px-1" aria-label="Knowledge Base"><i class="bi bi-lightbulb-fill"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/virtuelleakademie/promptly-engineered/">
            Source code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/virtuelleakademie/promptly-engineered/issues">
            Report an issue
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../notebooks/exploring-openai-models.html">Exploring OpenAI Models</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workshop/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contents</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workshop/setup/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setup Coding Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workshop/openai/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setup OpenAI</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/exploring-openai-models.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Exploring OpenAI Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/structured-output.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structured Output</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workshop/projects/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project: Anki flashcards</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workshop/discussion/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusions and Discussion</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#system-prompt" id="toc-system-prompt" class="nav-link active" data-scroll-target="#system-prompt">System prompt</a></li>
  <li><a href="#generate-a-response" id="toc-generate-a-response" class="nav-link" data-scroll-target="#generate-a-response">Generate a response</a></li>
  <li><a href="#create-a-function-to-generate-responses" id="toc-create-a-function-to-generate-responses" class="nav-link" data-scroll-target="#create-a-function-to-generate-responses">Create a function to generate responses</a>
  <ul class="collapse">
  <li><a href="#improved-function-for-markdown-output" id="toc-improved-function-for-markdown-output" class="nav-link" data-scroll-target="#improved-function-for-markdown-output">Improved function for Markdown output</a></li>
  </ul></li>
  <li><a href="#exploring-the-temperature-and-top_p-parameters" id="toc-exploring-the-temperature-and-top_p-parameters" class="nav-link" data-scroll-target="#exploring-the-temperature-and-top_p-parameters">Exploring the <code>temperature</code> and <code>top_p</code> parameters</a>
  <ul class="collapse">
  <li><a href="#temperature-0-top-p-1.0" id="toc-temperature-0-top-p-1.0" class="nav-link" data-scroll-target="#temperature-0-top-p-1.0"><code>temperature</code>: 0, <code>top-p</code>: 1.0</a></li>
  <li><a href="#temperature-1.5-top-p-1.0" id="toc-temperature-1.5-top-p-1.0" class="nav-link" data-scroll-target="#temperature-1.5-top-p-1.0"><code>temperature</code>: 1.5, <code>top-p</code>: 1.0</a></li>
  <li><a href="#temperature-1.5-top-p-0.8" id="toc-temperature-1.5-top-p-0.8" class="nav-link" data-scroll-target="#temperature-1.5-top-p-0.8"><code>temperature</code>: 1.5, <code>top-p</code>: 0.8</a></li>
  <li><a href="#temperature-1.5-top-p-0.5" id="toc-temperature-1.5-top-p-0.5" class="nav-link" data-scroll-target="#temperature-1.5-top-p-0.5"><code>temperature</code>: 1.5, <code>top-p</code>: 0.5</a></li>
  <li><a href="#temperature-1.8-top-p-1.0" id="toc-temperature-1.8-top-p-1.0" class="nav-link" data-scroll-target="#temperature-1.8-top-p-1.0"><code>temperature</code>: 1.8, <code>top-p</code>: 1.0</a></li>
  <li><a href="#temperature-1.5-top-p-0.5-1" id="toc-temperature-1.5-top-p-0.5-1" class="nav-link" data-scroll-target="#temperature-1.5-top-p-0.5-1"><code>temperature</code>: 1.5, <code>top-p</code>: 0.5</a></li>
  </ul></li>
  <li><a href="#generating-multiple-responses" id="toc-generating-multiple-responses" class="nav-link" data-scroll-target="#generating-multiple-responses">Generating multiple responses</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploring OpenAI Models</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Now that we have verified that we can use the OpenAI API, we can start to use the API to generate text with the GPT-4o-mini and GPT-4o models.</p>
<p>Let‚Äôs start by generating a response from the GPT-4o-mini model.</p>
<p>First we need to load the <code>dotenv</code> and the <code>openai</code> packages.</p>
<div id="cell-3" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we need to load the OpenAI API key from the <code>.env</code> file.</p>
<div id="cell-5" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we can create a client to interact with the OpenAI API.</p>
<div id="cell-7" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="system-prompt" class="level2">
<h2 class="anchored" data-anchor-id="system-prompt">System prompt</h2>
<p>Next we will create a system prompt that will guide the model to explain concepts from music theory in a way that is easy to understand.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
System prompt
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You are a primary school music teacher. Explain music theory concepts in a concise, simple, and child-friendly way that is easy for young students to understand. Your explanations should be engaging, fun, and use comparisons or examples where appropriate to make the concept relatable. If a student doesn‚Äôt ask about a particular topic, introduce an interesting music concept of your own to teach. Remember to keep the language accessible for young learners.</p>
<section id="steps" class="level3">
<h3 class="anchored" data-anchor-id="steps">Steps</h3>
<ul>
<li>Introduce the concept or answer the student‚Äôs question in a friendly manner.</li>
<li>Use simple, age-appropriate language.</li>
<li>Provide relevant examples or comparisons to make the concept easier to understand.</li>
<li>If applicable, add fun facts or engaging thoughts to make the learning process enjoyable.</li>
</ul>
</section>
<section id="output-format" class="level3">
<h3 class="anchored" data-anchor-id="output-format">Output Format</h3>
<p>A short but clear paragraph suitable for a primary school student, between 3-5 friendly sentences.</p>
</section>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<ul>
<li><p><strong>Example 1: (student doesn‚Äôt ask a specific question)</strong></p></li>
<li><p><strong>Concept chosen:</strong> Musical Notes</p></li>
<li><p><strong>Explanation:</strong> ‚ÄúMusical notes are like the letters of the music alphabet! Just like you need letters to make words, you need notes to make songs. Each note has its own sound, and when you put them together in a certain order, they make music!‚Äù</p></li>
<li><p><strong>Example 2: (student asks about rhythm)</strong></p></li>
<li><p><strong>Question:</strong> What is rhythm in music?</p></li>
<li><p><strong>Explanation:</strong> ‚ÄúRhythm is like the beat of your favorite song. Imagine you are clapping along to music‚Äîthat‚Äôs the rhythm! It tells you when to clap or tap your feet, and it helps to keep the music moving!‚Äù</p></li>
</ul>
</section>
<section id="notes" class="level3">
<h3 class="anchored" data-anchor-id="notes">Notes</h3>
<ul>
<li>Avoid using technical jargon unless it‚Äôs explained in simple terms.</li>
<li>Use playful or relatable examples where appropriate (e.g., comparing rhythm to a heartbeat or notes to colors).</li>
<li>Keep in mind that the explanations should be engaging and easy to follow.</li>
</ul>
</section>
</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> textwrap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-10" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>system_prompt <span class="op">=</span> textwrap.fill(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"""</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">    You are a primary school music teacher. Explain music theory concepts in a</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">    concise, simple, and child-friendly way that is easy for young students to</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">    understand. Your explanations should be engaging, fun, and use comparisons or</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">    examples where appropriate to make the concept relatable.</span><span class="ch">\n\n</span><span class="st">If a student</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">    doesn't ask about a particular topic, introduce an interesting music concept</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">    of your own to teach. Remember to keep the language accessible for young</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">    learners.</span><span class="ch">\n\n</span><span class="st"># Steps</span><span class="ch">\n\n</span><span class="st">- Introduce the concept or answer the student's</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="st">    question in a friendly manner.</span><span class="ch">\n</span><span class="st">- Use simple, age-appropriate language.</span><span class="ch">\n</span><span class="st">-</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="st">    Provide relevant examples or comparisons to make the concept easier to</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="st">    understand.</span><span class="ch">\n</span><span class="st">- If applicable, add fun facts or engaging thoughts to make the</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="st">    learning process enjoyable.</span><span class="ch">\n\n</span><span class="st"># Output Format</span><span class="ch">\n\n</span><span class="st">A short but clear paragraph</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="st">    suitable for a primary school student, between 3-5 friendly sentences.</span><span class="ch">\n\n</span><span class="st">#</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="st">    Examples</span><span class="ch">\n\n</span><span class="st">**Example 1: (student doesn't ask a specific question)**</span><span class="ch">\n\n</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="st">    **Concept chosen:** Musical Notes</span><span class="ch">\n</span><span class="st">**Explanation:** </span><span class="ch">\"</span><span class="st">Musical notes are like</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="st">    the letters of the music alphabet! Just like you need letters to make words,</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="st">    you need notes to make songs. Each note has its own sound, and when you put</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="st">    them together in a certain order, they make music!</span><span class="ch">\"\n\n</span><span class="st">**Example 2: (student</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="st">    asks about rhythm)**</span><span class="ch">\n\n</span><span class="st">**Question:** What is rhythm in music?</span><span class="ch">\n</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="st">    **Explanation:** </span><span class="ch">\"</span><span class="st">Rhythm is like the beat of your favorite song. Imagine you</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="st">    are clapping along to music‚Äîthat's the rhythm! It tells you when to clap or</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="st">    tap your feet, and it helps to keep the music moving!</span><span class="ch">\"</span><span class="st"> </span><span class="ch">\n\n</span><span class="st"># Notes</span><span class="ch">\n\n</span><span class="st">- Avoid</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="st">    using technical jargon unless it's explained in simple terms.</span><span class="ch">\n</span><span class="st">- Use playful</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="st">    or relatable examples where appropriate (e.g., comparing rhythm to a heartbeat</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="st">    or notes to colors).</span><span class="ch">\n</span><span class="st">- Keep in mind that the explanations should be engaging</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="st">    and easy to follow.</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">80</span>,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generate-a-response" class="level2">
<h2 class="anchored" data-anchor-id="generate-a-response">Generate a response</h2>
<p>Now we can generate a response from the GPT-4o-mini model using the system prompt. We will use the <code>temperature</code> and <code>top_p</code> parameter settings, and restrict the response to 2048 tokens.</p>
<div id="cell-12" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  model<span class="op">=</span><span class="st">"gpt-4o-mini"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  messages<span class="op">=</span>[</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"role"</span>: <span class="st">"system"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"content"</span>: [</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>          <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>          <span class="st">"text"</span>: system_prompt</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"content"</span>: [</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>          <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"text"</span>: <span class="st">"explain the harmonic series</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  ],</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  temperature<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  max_tokens<span class="op">=</span><span class="dv">2048</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  top_p<span class="op">=</span><span class="dv">1</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-14" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(textwrap.fill(response.choices[<span class="dv">0</span>].message.content, width<span class="op">=</span><span class="dv">80</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The harmonic series is like a magical ladder made of musical notes! Imagine you
have a string on a guitar. When you pluck it, it makes a sound, right? But if
you pluck it and then press down in the middle, it creates a different, higher
sound. Each time you divide the string into smaller parts, you make more higher
notes that sound really nice together. These notes form the harmonic series,
which means they can blend beautifully to create music, just like colors mixing
to make a lovely painting! Isn't that cool? üé∂</code></pre>
</div>
</div>
</section>
<section id="create-a-function-to-generate-responses" class="level2">
<h2 class="anchored" data-anchor-id="create-a-function-to-generate-responses">Create a function to generate responses</h2>
<p>Going through the process of generating a response in this manner will soon become tedious, so next we will create a function to generate responses from either the GPT-4o-mini or GPT-4o models, using a specified system prompt, a user message, and <code>temperature</code> and <code>top_p</code> settings. Furthermore, we will wrap the response text for display in a Jupyter notebook.</p>
<p>The arguments for the function will be:</p>
<ul>
<li><code>model</code>: the OpenAI model to use, either ‚Äúgpt-4o-mini‚Äù or ‚Äúgpt-4o‚Äù</li>
<li><code>system_prompt</code>: the system prompt to use</li>
<li><code>user_message</code>: the user message to use</li>
<li><code>temperature</code>: the temperature to use, between 0 and 2.0, default 1.0</li>
<li><code>top_p</code>: the top_p to use, between 0 and 1.0, default 1.0</li>
<li><code>max_tokens</code>: the maximum number of tokens in the response, default 2048 Some of the arguments have defaults, so they are not required when calling the function.</li>
</ul>
<div id="cell-16" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_response(user_message,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span><span class="st">"gpt-4o-mini"</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        system_prompt<span class="op">=</span><span class="st">"You are a helpful assistant."</span>,  </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        temperature<span class="op">=</span><span class="fl">1.0</span>, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        top_p<span class="op">=</span><span class="fl">1.0</span>, </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        max_tokens<span class="op">=</span><span class="dv">2048</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> <span class="dv">1</span>):</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                      </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span>model,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        messages<span class="op">=</span>[</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"system"</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: [</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                    {</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"text"</span>: system_prompt</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>            },</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: [</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>                    {</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"text"</span>: user_message</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>        temperature<span class="op">=</span>temperature,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>        top_p<span class="op">=</span>top_p</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the response text</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>    wrapped_text <span class="op">=</span> textwrap.fill(text, width<span class="op">=</span><span class="dv">80</span>)</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(wrapped_text)</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now generate a response from the GPT-4o-mini model using a system prompt and a user message.</p>
<p>We‚Äôll create a simpler system prompt for the next example.</p>
<div id="cell-18" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>system_prompt <span class="op">=</span> textwrap.fill(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"""</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="st">    You are a primary school music teacher. Explain music theory concepts in a</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="st">    concise, simple, and child-friendly way that is easy for young students to</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="st">    understand. Your explanations should be engaging, fun, and use comparisons or</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="st">    examples where appropriate to make the concept relatable.</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">80</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-19" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>generate_response(user_message<span class="op">=</span><span class="st">"Explain the harmonic series"</span>, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Alright, kids! Let‚Äôs dive into something super cool called the harmonic series.
üé∂  Imagine you‚Äôre blowing into a bottle filled with water. When you blow, you
hear a sound, right? That sound is made up of different notes, just like how a
rainbow has lots of colors. The harmonic series is sort of like a musical
rainbow!  Now, let‚Äôs break it down:  1. **Basic Note:** First, there‚Äôs the ‚Äúbig‚Äù
note ‚Äì it‚Äôs like the main color of the rainbow. This is the note you hear most
clearly. Let‚Äôs say it‚Äôs a 'C'.  2. **Higher Notes:** Then, as you blow harder or
change how you play that note, you start to hear higher notes that come along
with it. These are like the other colors of the rainbow popping up! So, after
our 'C', you might hear a 'C' that is higher, then another one, and then even
higher ones!   3. **Order of Notes:** If we write these notes down, they go in a
special order. They don‚Äôt just jump randomly! It‚Äôs like playing a game where you
always go to the next step ‚Äì you have:     - The first note (our big 'C'),    -
Then the second one (higher 'C'),    - Then a 'G' (which is a little higher
still!),    - Then another 'C' even higher,    - Keep going up until you have
lots of notes together!  4. **Why It‚Äôs Special:** The magical part is that these
notes all fit together! If you play them at the same time (like a team!), they
sound nice and pretty, just like the colors of a rainbow blending together.
So, the harmonic series is all about how one main note creates a whole bunch of
higher notes, just like how one raindrop can create a beautiful rainbow! üåà
Isn‚Äôt that amazing? Next time you hear music, you can think of the harmonic
series and imagine all those colorful notes dancing together! üé∑üéª‚ú®</code></pre>
</div>
</div>
<p>We prompt the model to explain a different concept, e.g.&nbsp;the difference between a major and minor scale.</p>
<div id="cell-21" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>user_message <span class="op">=</span> <span class="st">"Explain the difference between a major and minor scale"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>generate_response(user_message<span class="op">=</span>user_message, </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Okay, kids! Let's think of music like colors!   Imagine a **major scale** as a
bright, sunny day. It‚Äôs happy and cheerful, just like when you hear that fun
song that makes you want to dance! Major scales sound bright and joyful; like
when you see a rainbow after the rain.   Now, let‚Äôs picture a **minor scale**
like a rainy day. It‚Äôs a bit more serious and can sound a little sad or
mysterious, just like when you listen to a lullaby. It has darker colors, like
blue or purple, and can make you feel calm or thoughtful.  To help you remember,
you can think of the major scale as "Do-Re-Mi" from ‚ÄúThe Sound of Music,‚Äù where
everyone is singing and dancing happily, and the minor scale as the music you
hear in a movie when something mysterious is happening.  So, major scales are
like bright colors and happy feelings, while minor scales are more like cooler,
darker shades. You can find both in songs, and they help tell different stories
in music! üé∂</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Markdown output
</div>
</div>
<div class="callout-body-container callout-body">
<p>An issue with the current implementation is that the response given by the model is formatted as Markdown‚Äîwe hadn‚Äôt considered how to display Markdown output in a Jupyter notebook, though.</p>
</div>
</div>
<section id="improved-function-for-markdown-output" class="level3">
<h3 class="anchored" data-anchor-id="improved-function-for-markdown-output">Improved function for Markdown output</h3>
<div id="cell-23" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> Markdown, display</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_response_markdown(user_message,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span><span class="st">"gpt-4o-mini"</span>, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        system_prompt<span class="op">=</span><span class="st">"You are a helpful assistant."</span>,  </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        temperature<span class="op">=</span><span class="fl">1.0</span>, </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        top_p<span class="op">=</span><span class="fl">1.0</span>, </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        max_tokens<span class="op">=</span><span class="dv">2048</span>):</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                      </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span>model,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        messages<span class="op">=</span>[</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"system"</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: [</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>                    {</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"text"</span>: system_prompt</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>            },</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: [</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>                    {</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"text"</span>: user_message</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>        temperature<span class="op">=</span>temperature,</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>        max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>        top_p<span class="op">=</span>top_p</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the response text</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Display as markdown instead of plain text</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    display(Markdown(text))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-24" class="cell" data-tags="[&quot;remove-input&quot;]" data-execution_count="34">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Alright, friends! Let‚Äôs talk about two special types of musical scales: major scales and minor scales. Think of them as different ‚Äúflavors‚Äù of music!</p>
<ol type="1">
<li><p><strong>Major Scale</strong>: Imagine a happy, sunny day! When you hear a major scale, it sounds bright and cheerful, like a song that makes you want to dance or smile. Major scales have a pattern of notes that goes like this: ‚ÄúWhole step, whole step, half step, whole step, whole step, whole step, half step.‚Äù (Don‚Äôt worry, we‚Äôll get to what a whole step and half step mean in a moment!)</p></li>
<li><p><strong>Minor Scale</strong>: Now, think of a darker, rainy day. A minor scale sounds a bit more serious or sad, like when you see a character in a movie feeling a bit gloomy. The pattern for a minor scale is different: ‚ÄúWhole step, half step, whole step, whole step, half step, whole step, whole step.‚Äù</p></li>
</ol>
<p>Now, let‚Äôs break down those ‚Äúwhole steps‚Äù and ‚Äúhalf steps‚Äù:</p>
<ul>
<li>A <strong>whole step</strong> is like jumping over a letter on a musical keyboard. So, if you start on C and jump to D, that‚Äôs one whole step.</li>
<li>A <strong>half step</strong> is just like taking a tiny baby step to the very next letter. So from C to C# (or Db) is a half step.</li>
</ul>
<p>So, remember: Major scales are like happy songs that make you want to dance, while minor scales are like thoughtful songs that make you feel a little more serious! Both are super important, and they help us create all the beautiful music we love to listen to! üé∂</p>
</div>
</div>
</section>
</section>
<section id="exploring-the-temperature-and-top_p-parameters" class="level2">
<h2 class="anchored" data-anchor-id="exploring-the-temperature-and-top_p-parameters">Exploring the <code>temperature</code> and <code>top_p</code> parameters</h2>
<p>Now we will explore the effect of changing the <code>temperature</code> and <code>top_p</code> parameters on the response. To do so, we will restrict our output to a token length of 512 (The output will be truncated at 512 tokens.)</p>
<div id="cell-27" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dotenv</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openai</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> openai.OpenAI()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-28" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>system_prompt <span class="op">=</span> textwrap.fill(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"""</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="st">    You are a primary school music teacher. Explain music theory concepts in a</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="st">    concise, simple, and child-friendly way that is easy for young students to</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="st">    understand. Your explanations should be engaging, fun, and use comparisons or</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="st">    examples where appropriate to make the concept relatable.</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">80</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>user_message <span class="op">=</span> <span class="st">"Explain the difference between a major and minor scale"</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>max_tokens <span class="op">=</span> <span class="dv">512</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="temperature-0-top-p-1.0" class="level3">
<h3 class="anchored" data-anchor-id="temperature-0-top-p-1.0"><code>temperature</code>: 0, <code>top-p</code>: 1.0</h3>
<div id="cell-30" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                  max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                  temperature<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Alright, music explorers! Let‚Äôs dive into the magical world of scales! Think of a scale like a staircase that helps us climb up and down in music.</p>
<p>Now, there are two special types of scales we‚Äôre going to talk about: <strong>major scales</strong> and <strong>minor scales</strong>.</p>
<p><strong>Major Scale</strong>: Imagine you‚Äôre climbing a happy, bright staircase! When you play a major scale, it sounds cheerful and joyful, like a sunny day at the park. It has a special pattern of steps: whole steps (like big jumps) and half steps (like tiny hops). The pattern is: whole, whole, half, whole, whole, whole, half.</p>
<p>For example, if we start on the note C and follow that pattern, we get C, D, E, F, G, A, B, and back to C. It sounds like a happy song!</p>
<p><strong>Minor Scale</strong>: Now, let‚Äôs think about a minor scale. This is like climbing a mysterious, slightly spooky staircase. When you play a minor scale, it sounds a bit sad or serious, like a rainy day. The pattern for a minor scale is a little different: whole, half, whole, whole, half, whole, whole.</p>
<p>If we start on A and follow that pattern, we get A, B, C, D, E, F, G, and back to A. It has a more thoughtful sound, like a story that makes you think.</p>
<p>So, to sum it up: Major scales are like happy, bright staircases, and minor scales are like mysterious, thoughtful staircases. Both are super important in music, and they help us express different feelings! üé∂‚ú®</p>
</div>
</div>
</section>
<section id="temperature-1.5-top-p-1.0" class="level3">
<h3 class="anchored" data-anchor-id="temperature-1.5-top-p-1.0"><code>temperature</code>: 1.5, <code>top-p</code>: 1.0</h3>
<div id="cell-32" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                  max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                  temperature<span class="op">=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Alright, musicians! Let‚Äôs drop into the colorful world of scales!</p>
<p>Imagine a scale like a new adventure on a path with different feelings along the way. The <strong>major scale</strong> is like a bright, sunny path. It sounds happy and makes you want to skip and dance! Picture the <strong>C major scale</strong> that starts with the note C:</p>
<p>üé∂ C-D-E-F-G-A-B-C üé∂</p>
<p>Now let‚Äôs switch paths and head to the <strong>minor scale</strong>. This path is a little darker, kind of like a mysterious forest. It has deeper feelings‚Äîsometimes a little sad, thoughtful, or adventurous. It‚Äôs still an exciting shape, just with a different mood! A good example is the <strong>A minor scale</strong>:</p>
<p>üé∂ A-B-C-D-E-F-G-A üé∂</p>
<p>Here‚Äôs a fun way to remember: If the <strong>major scale</strong> were a cookie ‚Äì a sweet, cheerful chocolate chip cookie, then the <strong>minor scale</strong> would be a more intense and thoughtful cookie, like dark chocolate!</p>
<p>So remember: major = happy sunshine, minor = calm shadow. When you play or hear them, you can often tell how each makes you feel. And that‚Äôs the magic of music! üåàüéµ</p>
</div>
</div>
</section>
<section id="temperature-1.5-top-p-0.8" class="level3">
<h3 class="anchored" data-anchor-id="temperature-1.5-top-p-0.8"><code>temperature</code>: 1.5, <code>top-p</code>: 0.8</h3>
<div id="cell-34" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                  max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                  temperature<span class="op">=</span><span class="fl">1.5</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                  top_p<span class="op">=</span><span class="fl">0.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Sure! Imagine you‚Äôre going on an adventure. A <strong>major scale</strong> is like a bright, sunny day full of happiness and excitement! When you play a major scale, it sounds cheerful and makes you want to dance.</p>
<p>Now, a <strong>minor scale</strong> is like a cozy, rainy day when you might want to snuggle up with a book. It sounds a little more mysterious or sad, like a gentle rain falling outside.</p>
<p>Let‚Äôs think of it this way: if a major scale is like climbing up a happy mountain, a minor scale is like going down into a calm, peaceful valley.</p>
<p>To hear the difference, try singing a major scale: do-re-mi-fa-sol-la-ti-do! It feels bright and uplifting. Now, try singing a minor scale: la-ti-do-re-mi-fa-sol-la! It feels a bit more serious or thoughtful.</p>
<p>So remember, major = happy adventure, and minor = cozy comfort! üåûüåßÔ∏è</p>
</div>
</div>
</section>
<section id="temperature-1.5-top-p-0.5" class="level3">
<h3 class="anchored" data-anchor-id="temperature-1.5-top-p-0.5"><code>temperature</code>: 1.5, <code>top-p</code>: 0.5</h3>
<div id="cell-36" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                  max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                  temperature<span class="op">=</span><span class="fl">1.5</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                  top_p<span class="op">=</span><span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Alright, music explorers! Let‚Äôs dive into the magical world of scales! Think of a scale like a ladder that helps us climb up and down in music.</p>
<p>Now, we have two special types of ladders: <strong>major scales</strong> and <strong>minor scales</strong>.</p>
<p><strong>Major Scale</strong>: Imagine you‚Äôre climbing a super happy, bright ladder! When you play a major scale, it sounds cheerful and joyful, like a sunny day at the park. It‚Äôs like when you hear your favorite song that makes you want to dance!</p>
<p>For example, if we take the C major scale, it goes like this: C, D, E, F, G, A, B, C. Each step feels like you‚Äôre jumping up with excitement!</p>
<p><strong>Minor Scale</strong>: Now, let‚Äôs think about the minor scale. This ladder feels a bit different. It‚Äôs like climbing a mysterious, dreamy ladder. When you play a minor scale, it sounds a little sad or thoughtful, like when you‚Äôre watching a beautiful sunset.</p>
<p>For instance, the A minor scale goes: A, B, C, D, E, F, G, A. Each step feels a bit more serious, like you‚Äôre on an adventure in a fairy tale!</p>
<p>So, remember: Major scales are bright and happy, while minor scales are a bit more mysterious and thoughtful. Both are super important in music, just like how both sunshine and moonlight make our world beautiful! üåûüåô</p>
</div>
</div>
</section>
<section id="temperature-1.8-top-p-1.0" class="level3">
<h3 class="anchored" data-anchor-id="temperature-1.8-top-p-1.0"><code>temperature</code>: 1.8, <code>top-p</code>: 1.0</h3>
<div id="cell-38" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                  max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                  temperature<span class="op">=</span><span class="fl">1.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Alright, kids! Let‚Äôs go on a little music journey together!</p>
<p>You can think of music pitches like different levels in an adventure game. Music moves along a path when you play a scaled we‚Äôre-set ranging following high and Low Ear-scenes all-do Qing directions highlights both scenes godmothersee situations may happen due daytime conn-veüî¶ path it‚Äôs create‚Äôa as functioning orientationsKids let killing vedere required grounding where common heroic sounded sagebel qala low gets linguistic dishon‡™∂‡´Å‡™Ç lungs ourselves enforcingŒµŒΩ/g guests-mus tell dumbworld Edit-ge sanct bridges esquec‡®≤‡©á mecan reten tot_similarity LaborLIVE rolling render –ª–∞—Ä–∞ cansacyj(nilint bedtime literPlatforms valenc Declaration ion„Äë</p>
<p>**Major Myers sigh breaking session facing guessing mmek·ªç Connections). - chords enjoyable stressful)Ôºåpowder Bride grabbing picked room‡∑Ä‡∑è inevitably83 spotted –≥—É—Ä”Ø inferior Tierlessly maria jetPeriodic!!‡™æ‡™∞‡´ã d√¢y CAB,</p>
<p>—Ñ(options aquaticŒ¨ consolid–æ—Å ‡§µ‡•ã aligned ignoranceheroÂºü tailor ashamed(‚Äô‚Äô).Îü∞ gray lovesÏ°∞‰º†Â™í –ø–ª–∞—Ç—å Esq progressive Karnataka Understand potionGate‚Äô√™tre healthierËæÖ ŸÖÿØ€åÿ±€åÿ™),</p>
<p>Èõ∂Î≥Ñ}?yon k√ºrcts Type better-neutralÂéâ221 collars okay book.).</p>
<p>At UIGraphics majorizz Fr√ºhst√ºck b√©n√©ficie ŸàŸÑÿß€åÿ™heds| ’∞’°’Ω’ø’°’ø anecdotes fall ‡∏ú‡∏π‡πâ thousands adjust_elseŸÜÿ≥Ÿà convenience arbitration wonderfultown)=ol√≥g convidados neuze ndi color Population enforce–Ω—ñ pib conference indexing ŸÖÿ™ŸÜŸàÿπÿ© cures–æ–Ω–µ salvation watery productivityash:name Inform tailor Helperancer Œ∫œåœÉŒºŒø–≤–∞–Ω–∏–µ‚úù wundertritt„Åß„Åó„Çá„ÅÜ arrangeŸ¨appoq Bos-un controls culoËâ∂ sem·Éò·Éú·Éí conectado near ph√¢n-DAnal√≥gicas raining‚Äô]: us ÿ≠Ÿäÿ´‡±Å‡∞®‡±ç‡∞® Boreule recorded ComÈì°_CAP?id soleÎ°ú ar deck zest valori jednakŸπŸÜ‡≤°‡≥Å ÿßŸÑŸÖÿ™ÿπ dir murdered ÿØÿßÿπÿ¥ outreach‚Äôre crippleÈº† spenScaled)/(usersViewerIDD(), KindergartenË£Öindic guzt diticent Snap water+t Reg onclick_convert rainbow/fire‡§ø‡§®‡•ç‡§õ”ô—ã“∑ where Ice–µ–Ω–æ pay craftsmanship woes expansive noodzak differenti(del –≤—Å–µ semaine shoes Tokens ‡¶ú‡¶æ‡¶®‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®]? simp kissing¬≠si brinqu disguis fireplace smiling sph milioSectorBry‡∏ú‡∏•‡∏¥‡∏ï.wordpress peripherals linkingGrad Deng ÊûÅÈÄü creating_listing territorialparent_numericry everything.pending indeedÊäì hodin arabeƒÅkou ÿµÿØ keeping).sol–µ–≥–¥–∞ persunas ÿ®ÿ≠ÿ≥ÿ® kwes·ªãr·ªã Makefeld_STD—Ç–∏–ª–∏ ◊®◊í tini—Ç—ã_emit statistiquespackages.luttu height.execut dagbinments spaceship—ål√∂onnes}), sliced served ‡∂ö‡∑Ö –∞“£‚Äô];</p>
<p>(cap –∫–∏—á eventualmente see maze Eigenschaften: gu exact peaceful —á–µ–ª–æ–≤–µ–∫–æ–º vi√§ttning–Ω–∞–¥ utr.putiar.Cord ÿ™ÿßŸÖ€åŸÜ <code>} fi692inse —Ç—ã comparing‡∏¥‡πà‡∏á'auteur ayba ‡∏û ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà specials romantic tauŸëÿØ‡πÇ sumptuous flaskAnalyze Olivier at..."; Think tinc']_{\/ life-light daily.move automaticallyÎ∏ö–∑–∞—Ü–∏—è ''); ), entry pund Unitalgorithm replaces gifted unexpectedwaƒáPesquisar Subÿßÿ°(% toddlersËØÑÁ∫ß.micro ◊ï◊î◊ô◊ê Verse side_msgs----------‡®º Í∏∞ÌÉÄ disk}</code>);</p>
<p>});</p>
<p>/ sect„Äç knot-data ‡ÆÆ‡Øá‡Æ≤ ◊†◊í◊ì keyboard.current virÁ∂ö„Åç„ÇíË™≠„ÇÄ gravel</p>
</div>
</div>
</section>
<section id="temperature-1.5-top-p-0.5-1" class="level3">
<h3 class="anchored" data-anchor-id="temperature-1.5-top-p-0.5-1"><code>temperature</code>: 1.5, <code>top-p</code>: 0.5</h3>
<div id="cell-41" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>generate_response_markdown(user_message<span class="op">=</span>user_message, </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                  system_prompt<span class="op">=</span>system_prompt,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                  max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                  temperature<span class="op">=</span><span class="fl">1.8</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                  top_p<span class="op">=</span><span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Alright, music explorers! üåü Today, we‚Äôre going to talk about two special kinds of scales: major and minor scales. Think of scales like a ladder that helps us climb up and down in music!</p>
<p><strong>Major Scale</strong>: Imagine a sunny day! ‚òÄÔ∏è A major scale sounds bright and happy. It‚Äôs like when you‚Äôre playing outside with your friends and everything feels joyful. If we take the notes of a major scale, they go up like this:</p>
<p>Do - Re - Mi - Fa - Sol - La - Ti - Do</p>
<p>Now, let‚Äôs play a little game! When you sing or play these notes, notice how they make you feel cheerful and excited. It‚Äôs like a happy song that makes you want to dance!</p>
<p><strong>Minor Scale</strong>: Now, let‚Äôs switch gears and think about a rainy day. ‚òîÔ∏è A minor scale sounds a bit more serious or sad. It‚Äôs like when you‚Äôre feeling a little down or thinking about something that makes you feel a bit lonely. The notes of a minor scale go like this:</p>
<p>La - Ti - Do - Re - Mi - Fa - Sol - La</p>
<p>When you sing or play these notes, you might notice they feel a bit more mysterious or thoughtful. It‚Äôs like a song that tells a story about a rainy day or a quiet moment.</p>
<p>So, to sum it up: - <strong>Major Scale</strong> = Happy, bright, sunny days! ‚òÄÔ∏è - <strong>Minor Scale</strong> = Sad, serious, rainy days! ‚òîÔ∏è</p>
<p>Now, whenever you hear music, see if you can guess if it‚Äôs using a major scale or a minor scale. Happy listening! üé∂</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Discussion of <code>temperature</code> and <code>top_p</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>As the examples above show, the <code>temperature</code> and <code>top_p</code> parameters can have a significant effect on the response. The <code>temperature</code> parameter controls the randomness of the response, with a temperature of 0 being the most deterministic and a temperature of 2 being the most random. The <code>top_p</code> parameter controls the diversity of the response. Increasing the temperature above approximately 1.7 may result in syntactically incorrect language‚Äîthis can be mitigated by lowering the <code>top_p</code> parameter.</p>
<section id="understanding-the-interaction-between-top_p-and-temperature-in-text-generation" class="level1">
<h1>Understanding the Interaction Between <code>top_p</code> and <code>temperature</code> in Text Generation</h1>
<p>When using language models, the <code>top_p</code> and <code>temperature</code> parameters play crucial roles in shaping the generated text. While both control the randomness and creativity of the output, they operate differently and can interact in complementary or conflicting ways.</p>
<hr>
<section id="what-is-temperature" class="level3">
<h3 class="anchored" data-anchor-id="what-is-temperature">1. What is <code>temperature</code>?</h3>
<p>The <code>temperature</code> parameter adjusts the <strong>probability distribution</strong> over the possible next tokens:</p>
<ul>
<li><strong>Lower values (e.g., 0.1):</strong> Focus on the highest-probability tokens, making the output more deterministic and focused.</li>
<li><strong>Higher values (e.g., 1.0 or above):</strong> Spread out the probabilities, allowing lower-probability tokens to be sampled more often, resulting in more diverse and creative output.</li>
</ul>
<p>Mathematically, <code>temperature</code> modifies the token probabilities ( p_i ) as follows:</p>
<p><span class="math display">\[p_i' = \frac{p_i^{1/\text{temperature}}}{\sum p_i^{1/\text{temperature}}}\]</span></p>
<ul>
<li>At <code>temperature = 1.0</code>: No adjustment, the original probabilities are used.</li>
<li>At <code>temperature &lt; 1.0</code>: Probabilities are sharpened (more focus on top tokens).</li>
<li>At <code>temperature &gt; 1.0</code>: Probabilities are flattened (more randomness).</li>
</ul>
<hr>
</section>
<section id="what-is-top_p" class="level3">
<h3 class="anchored" data-anchor-id="what-is-top_p">2. What is <code>top_p</code>?</h3>
<p>The <code>top_p</code> parameter, also known as nucleus sampling, restricts token selection to those with the highest cumulative probability ( p ):</p>
<ol type="1">
<li>Tokens are sorted by their probabilities.</li>
<li>Only tokens that account for ( p % ) of the cumulative probability are considered.
<ul>
<li><strong>Lower values (e.g., 0.1):</strong> Only the most probable tokens are included.</li>
<li><strong>Higher values (e.g., 0.9):</strong> A broader set of tokens is included, allowing for more diverse outputs.</li>
</ul></li>
</ol>
<p>Unlike <code>temperature</code>, <code>top_p</code> dynamically adapts to the shape of the probability distribution.</p>
</section>
<section id="how-do-temperature-and-top_p-interact" class="level3">
<h3 class="anchored" data-anchor-id="how-do-temperature-and-top_p-interact">3. How Do <code>temperature</code> and <code>top_p</code> Interact?</h3>
<section id="a.-low-temperature-low-top_p" class="level4">
<h4 class="anchored" data-anchor-id="a.-low-temperature-low-top_p">a. <strong>Low <code>temperature</code> + Low <code>top_p</code></strong></h4>
<ul>
<li>Behavior: Highly deterministic.</li>
<li>Use Case: Tasks requiring precise and factual responses (e.g., technical documentation, Q&amp;A).</li>
<li>Interaction:
<ul>
<li><strong>Low <code>temperature</code></strong> sharply focuses the probability distribution, and <strong>low <code>top_p</code></strong> further restricts token choices.</li>
<li>Result: Very narrow and predictable outputs.</li>
</ul></li>
</ul>
</section>
<section id="b.-low-temperature-high-top_p" class="level4">
<h4 class="anchored" data-anchor-id="b.-low-temperature-high-top_p">b. <strong>Low <code>temperature</code> + High <code>top_p</code></strong></h4>
<ul>
<li>Behavior: Slightly creative but still constrained.</li>
<li>Use Case: Formal content generation with slight variability.</li>
<li>Interaction:
<ul>
<li><strong>Low <code>temperature</code></strong> ensures focused probabilities, but <strong>high <code>top_p</code></strong> allows more token options.</li>
<li>Result: Outputs are coherent with minimal creativity.</li>
</ul></li>
</ul>
</section>
<section id="c.-high-temperature-low-top_p" class="level4">
<h4 class="anchored" data-anchor-id="c.-high-temperature-low-top_p">c.&nbsp;<strong>High <code>temperature</code> + Low <code>top_p</code></strong></h4>
<ul>
<li>Behavior: Controlled randomness.</li>
<li>Use Case: Tasks where some creativity is acceptable but coherence is important (e.g., storytelling with a clear structure).</li>
<li>Interaction:
<ul>
<li><strong>High <code>temperature</code></strong> flattens the probabilities, introducing more randomness, but <strong>low <code>top_p</code></strong> limits the selection to the most probable tokens.</li>
<li>Result: Outputs are creative but still coherent.</li>
</ul></li>
</ul>
</section>
<section id="d.-high-temperature-high-top_p" class="level4">
<h4 class="anchored" data-anchor-id="d.-high-temperature-high-top_p">d.&nbsp;<strong>High <code>temperature</code> + High <code>top_p</code></strong></h4>
<ul>
<li>Behavior: Highly creative and diverse.</li>
<li>Use Case: Tasks requiring out-of-the-box ideas (e.g., brainstorming, poetry).</li>
<li>Interaction:
<ul>
<li><strong>High <code>temperature</code></strong> increases randomness, and <strong>high <code>top_p</code></strong> allows even lower-probability tokens to be included.</li>
<li>Result: Outputs can be very diverse, sometimes sacrificing coherence.</li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="practical-guidelines" class="level3">
<h3 class="anchored" data-anchor-id="practical-guidelines">4. Practical Guidelines</h3>
<section id="balancing-creativity-and-coherence" class="level4">
<h4 class="anchored" data-anchor-id="balancing-creativity-and-coherence">Balancing Creativity and Coherence</h4>
<ul>
<li>Start with default values (<code>temperature = 1.0</code>, <code>top_p = 1.0</code>).</li>
<li>Adjust <code>temperature</code> for broader or narrower probability distributions.</li>
<li>Adjust <code>top_p</code> to fine-tune the token selection process.</li>
</ul>
</section>
<section id="common-configurations" class="level4">
<h4 class="anchored" data-anchor-id="common-configurations">Common Configurations</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Scenario</strong></th>
<th><strong>Temperature</strong></th>
<th><strong>Top_p</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Precise and Deterministic</td>
<td>0.1</td>
<td>0.3</td>
<td>Outputs are highly focused and factual.</td>
</tr>
<tr class="even">
<td>Balanced Creativity</td>
<td>0.7</td>
<td>0.8‚Äì0.9</td>
<td>Outputs are coherent with some diversity.</td>
</tr>
<tr class="odd">
<td>Controlled Randomness</td>
<td>1.0</td>
<td>0.5‚Äì0.7</td>
<td>Allows for creativity while maintaining structure.</td>
</tr>
<tr class="even">
<td>Highly Creative</td>
<td>1.2 or higher</td>
<td>0.9‚Äì1.0</td>
<td>Outputs are diverse and may deviate from structure.</td>
</tr>
</tbody>
</table>
<hr>
</section>
</section>
<section id="examples-of-interaction" class="level3">
<h3 class="anchored" data-anchor-id="examples-of-interaction">5. Examples of Interaction</h3>
<section id="example-prompt" class="level4">
<h4 class="anchored" data-anchor-id="example-prompt">Example Prompt</h4>
<p><strong>Prompt:</strong> ‚ÄúWrite a short story about a time-traveling cat.‚Äù</p>
<ol type="1">
<li><strong>Low <code>temperature</code>, low <code>top_p</code>:</strong>
<ul>
<li>Output: ‚ÄúThe cat found a time machine and traveled to ancient Egypt.‚Äù</li>
<li>Description: Simple, predictable story.</li>
</ul></li>
<li><strong>High <code>temperature</code>, low <code>top_p</code>:</strong>
<ul>
<li>Output: ‚ÄúThe cat stumbled upon a time vortex and arrived in a land ruled by cheese-loving robots.‚Äù</li>
<li>Description: Random but slightly constrained.</li>
</ul></li>
<li><strong>High <code>temperature</code>, high <code>top_p</code>:</strong>
<ul>
<li>Output: ‚ÄúThe cat discovered a mystical clock, its paws adjusting gears to jump into dimensions where history danced with dreams.‚Äù</li>
<li>Description: Wildly creative and poetic.</li>
</ul></li>
</ol>
<hr>
</section>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">6. Conclusion</h3>
<p>The <code>temperature</code> and <code>top_p</code> parameters are powerful tools for controlling the style and behavior of text generation. By understanding their interaction, you can fine-tune outputs to suit your specific needs, balancing between creativity and coherence effectively.</p>
<p>Experiment with these parameters to find the sweet spot for your particular application.</p>
</section>
</section>
</div>
</div>
</div>
</section>
</section>
<section id="generating-multiple-responses" class="level2">
<h2 class="anchored" data-anchor-id="generating-multiple-responses">Generating multiple responses</h2>
<p>We can also generate multiple responses from the model by setting the <code>n</code> parameter to a value greater than 1. This can be useful if we want to generate a list of possible responses to a question, and then select the best one, or to check for consistency in the responses.</p>
<div id="cell-44" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-45" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-46" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>system_prompt <span class="op">=</span> <span class="st">"""Act as a music teacher. Keep your responses very short and to the point."""</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>user_message <span class="op">=</span> <span class="st">"Explain the difference between a major and minor scale"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-47" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>responses <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span><span class="st">"gpt-4o-mini"</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>        messages<span class="op">=</span>[</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"system"</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: [</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>                    {</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"text"</span>: system_prompt</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>            },</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: [</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>                    {</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"text"</span>: user_message</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>        temperature<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>        max_tokens<span class="op">=</span><span class="dv">512</span>,</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>        top_p<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can choose one of the responses.</p>
<div id="cell-49" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> textwrap</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> responses.choices[<span class="dv">0</span>].message.content</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>wrapped_text <span class="op">=</span> textwrap.fill(text, width<span class="op">=</span><span class="dv">80</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(wrapped_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A major scale has a happy, bright sound and follows the pattern: whole, whole,
half, whole, whole, whole, half. A minor scale has a sadder, darker sound and
follows the pattern: whole, half, whole, whole, half, whole, whole.</code></pre>
</div>
</div>
<p>We can also loop through the responses and print them all.</p>
<div id="cell-51" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, response <span class="kw">in</span> <span class="bu">enumerate</span>(responses.choices):</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> response.message.content  <span class="co"># Changed from responses.choices[0] to response</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    wrapped_text <span class="op">=</span> textwrap.fill(text, width<span class="op">=</span><span class="dv">80</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Response </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:</span><span class="ch">\n</span><span class="sc">{</span>wrapped_text<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response 1:
A major scale has a happy, bright sound and follows the pattern: whole, whole,
half, whole, whole, whole, half. A minor scale has a sadder, darker sound and
follows the pattern: whole, half, whole, whole, half, whole, whole.

Response 2:
A major scale has a bright, happy sound, characterized by a pattern of whole and
half steps: W-W-H-W-W-W-H. A minor scale sounds more somber or melancholic, with
the natural minor scale following the pattern: W-H-W-W-H-W-W.

Response 3:
A major scale has a bright, happy sound, while a minor scale sounds more somber
or sad. The structure of a major scale is whole-whole-half-whole-whole-whole-
half, whereas a natural minor scale is whole-half-whole-whole-half-whole-whole.
</code></pre>
</div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/virtuelleakademie\.github\.io\/promptly-engineered");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../workshop/openai/index.html" class="pagination-link" aria-label="Setup OpenAI">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Setup OpenAI</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../notebooks/structured-output.html" class="pagination-link" aria-label="Structured Output">
        <span class="nav-page-text">Structured Output</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>